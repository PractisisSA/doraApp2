function GuardarCambiosImpuestos(a){$("#cargando2").fadeIn(),setTimeout(function(){$("#cargando2").fadeOut()},1e3);var o=$("#conimp"+a).is(":checked");$.ajax({url:"ajax/productos/datosformuladosimpuestos.php",data:{conimp:o.toString(),id:a}}).done(function(o){"ok"==o&&$("#preciosinimp_"+a+",#precioconimp_"+a).effect("highlight",[],1e3)})}function GuardarCambios(a){$("#cargando2").fadeIn(),setTimeout(function(){$("#cargando2").fadeOut()},1e3);var o=$("#coniva"+a).is(":checked"),e=$("#conserv"+a).is(":checked"),i=$("#preciosinimp_"+a).val(),n=$("#precioconimp_"+a).val();$.ajax({url:"ajax/productos/datosformulados.php",data:{iva:o.toString(),sinimp:i,conimp:n,id:a,serv:e.toString()}}).done(function(o){"ok"==o&&$("#preciosinimp_"+a+",#precioconimp_"+a).effect("highlight",[],1e3)})}function CalculaSinImp(a){$("#cargando2").fadeIn(),setTimeout(function(){$("#cargando2").fadeOut()},1e3);var o=parseFloat($("#precioconimp_"+a).val()),e=1;$("#coniva"+a).is(":checked")&&(e+=parseFloat($("#coniva"+a).attr("data-value"))),"1"==$("#coniva"+a).attr("data-serv")&&(e+=parseFloat($("#coniva"+a).attr("data-valueserv"))),$("#preciosinimp_"+a).val((o/e).toFixed(4)),1==$("#seisdec").val()&&$("#preciosinimp_"+a).val((o/e).toFixed(6))}function CalculaConImp(a){$("#cargando2").fadeIn(),setTimeout(function(){$("#cargando2").fadeOut()},1e3),console.log($("#coniva"+a).attr("data-serv"));var o=parseFloat($("#preciosinimp_"+a).val()),e=1;$("#coniva"+a).is(":checked")&&(e+=parseFloat($("#coniva"+a).attr("data-value"))),"1"==$("#coniva"+a).attr("data-serv")&&(e+=parseFloat($("#coniva"+a).attr("data-valueserv"))),$("#precioconimp_"+a).val((o*e).toFixed(2)),1==$("#seisdec").val()&&$("#precioconimp_"+a).val((o*e).toFixed(6))}function CalculaSinImpNube(a){$("#cargando2").fadeIn(),setTimeout(function(){$("#cargando2").fadeOut()},1e3);var o=parseFloat($("#precioconimp_"+a).val()),e=parseFloat($("#impuestoterminal").val()),i=0;i=$("#conimp"+a).is(":checked")?o/e:o/1,$("#preciosinimp_"+a).val(i.toFixed(2)),1==$("#seisdec").val()&&$("#preciosinimp_"+a).val(i.toFixed(6))}function CalculaConImpNube(a){$("#cargando2").fadeIn(),setTimeout(function(){$("#cargando2").fadeOut()},1e3);var o=parseFloat($("#preciosinimp_"+a).val()),e=parseFloat($("#impuestoterminal").val()),i=0;i=$("#conimp"+a).is(":checked")?o*e:1*o,$("#precioconimp_"+a).val(i.toFixed(2))}function MostrarImportador(){$("#cargando,#cargando2").fadeIn(),setTimeout(function(){$("#cargando,#cargando2").fadeOut()},1e3),$("#modalimportador").modal("show")}function CalculaSwitch(a,o){var e=parseFloat($("#preciosinimp_"+a).val()),i=parseFloat($("#precioconimp_"+a).val());1==o?i+=e*$("#coniva"+a).attr("data-value"):i-=e*$("#coniva"+a).attr("data-value"),$("#precioconimp_"+a).val(i.toFixed(2))}function CalculaSwitchNube(a,o){var e=parseFloat($("#preciosinimp_"+a).val()),i=parseFloat($("#precioconimp_"+a).val()),n=parseFloat($("#impuestoterminal").val());i=1==o?e*n:1*e,$("#precioconimp_"+a).val(i.toFixed(2))}function centerModal(){var a=$(this).find(".modal-dialog"),o=($(window).height()-a.height())/2;a.css("margin-top",o)}function EliminarProducto(){$("#cargando,#cargando2").fadeIn(),setTimeout(function(){$("#cargando,#cargando2").fadeOut()},1e3),$("#loaderelim").fadeIn();var a=$("#idprodeliminar").val();$.ajax({url:"ajax/productos/eliminarproducto.php",data:{id:a}}).done(function(a){$("#loaderelim").fadeOut();var o=a.split("|");"ok"==o[0]?($("#jsalertelim").html("El producto se ha eliminado con éxito."),$("#jsalertelim").slideDown(),setTimeout(function(){window.location.reload()},4e3)):"error"==o[0]&&("cardex"==o[1]?$("#jsalertelim").html("El producto no se puede eliminar ya que presenta movimientos en el cardex"+o[2]):"formulacion"==o[1]?$("#jsalertelim").html("El producto no se puede eliminar ya que está siendo usado para formulaciones"+o[2]):"diseno"==o[1]&&$("#jsalertelim").html("El producto no se puede eliminar ya que está siendo usado en el diseño de menú"+o[2]),$("#jsalertelim").slideDown())})}function ConfirmaEliminar(a){$("#cargando,#cargando2").fadeIn(),setTimeout(function(){$("#cargando,#cargando2").fadeOut()},1e3),$("#modaleliminar").modal("show"),$("#nameprodeliminar").html($("#fname"+a).html()),$("#idprodeliminar").val(a),$("#jsalertelim").html(""),$("#jsalertelim").css("display","none")}function VerProducto(a){$("#cargando,#cargando2").fadeIn(),setTimeout(function(){$("#cargando,#cargando2").fadeOut()},1e3),$("#idselec").val(a),$("#filtro").attr("action","?modulo=inventario&index=productos_config"),$("#filtro").submit()}function VerDisenoMenu(a){$("#cargando,#cargando2").fadeIn(),setTimeout(function(){$("#cargando,#cargando2").fadeOut()},1e3),$("#idselec").val(a),$("#idp").val(a),$("#filtro").attr("action","?modulo=productos&index=disenomenu"),$("#filtro").submit()}function VerDisenoMenuNube(a){$("#cargando,#cargando2").fadeIn(),setTimeout(function(){$("#cargando,#cargando2").fadeOut()},1e3),$("#idselec").val(a),$("#idp").val(a),$("#filtro").attr("action","?modulo=productos&index=disenomenu_nube"),$("#filtro").submit()}function VerFormulacion(a){$("#cargando,#cargando2").fadeIn(),setTimeout(function(){$("#cargando,#cargando2").fadeOut()},1e3),$("#idselec").val(a),$("#idp").val(a),$("#filtro").attr("action","?modulo=inventario&index=formulacion"),$("#filtro").submit()}function VerServicio(a){$("#cargando,#cargando2").fadeIn(),setTimeout(function(){$("#cargando,#cargando2").fadeOut()},1e3),$("#conserv"+a).is(":checked")?$("#coniva"+a).attr("data-serv","1"):$("#coniva"+a).attr("data-serv","0"),CalculaConImp(a)}function FiltrarProductos(){$("#cargando,#cargando2").fadeIn(),setTimeout(function(){$("#cargando,#cargando2").fadeOut()},1e3),$("#offset").val("0"),$("#filtro").submit()}function cargaconversion(){$("#myModalc").modal("show")}$(document).ready(function(){$(".form-element").each(function(){$(this).change(function(){GuardarCambios($(this).attr("data-id"))})}),$(".impventa").on("change",function(){var a=$(this).is(":checked");CalculaSwitch($(this).attr("data-id"),a),GuardarCambios($(this).attr("data-id"))}),$(".imptiene").on("change",function(){var a=$(this).is(":checked");CalculaSwitchNube($(this).attr("data-id"),a),GuardarCambiosImpuestos($(this).attr("data-id"))}),$("#modalimportador,#modaleliminar").on("shown.bs.modal",centerModal)}),$(window).on("resize",function(){$(".modal:visible").each(centerModal)}),$("#excel").on("change",function(){$("#cargando,#cargando2").fadeIn(),setTimeout(function(){$("#cargando,#cargando2").fadeOut()},1e3),$("#fileform").ajaxForm({success:function(a){$("#loader").fadeOut(),console.log(a);var o=a.split("|");"ok"==o[0]&&""==o[1]?($("#jsalert").html("Productos importados con éxito."),$("#jsalert").slideDown(),location.reload(!0)):($("#jsalert").html("El importador, no ha subido las siguientes líneas erróneas:"+o[1]),$("#jsalert").slideDown())}}).submit()});