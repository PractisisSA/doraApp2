function AdvertirCodigo(){var a=$("#codigoProd").val();null==a||""==a?($(".alert-info").html("Si no coloca un número de código, el sistema le asignará uno, automáticamente."),$(".alert-info").slideDown()):($(".alert-info").html(""),$(".alert-info").slideUp())}function jsonimpuestosventa(){var a=new Array,t=parseFloat($("#precioSinImpuestos").val()),o=0,i=0,e=0;$(".impventa").each(function(){var n=new Array($(this).attr("data-id"),$(this).is(":checked").toString());if(a.push(n),$(this).is(":checked"))if(1==$(this).attr("data-id")){var r=parseFloat($(this).attr("data-value"));o=t*r}else if(2==$(this).attr("data-id")){r=parseFloat($(this).attr("data-value"));i=t*r}else{r=parseFloat($(this).attr("data-value"));e=t*r}}),t+=o+i+e,$("#jsonimpventa").val(JSON.stringify(a)),console.log(t),1==$("#seisdec").val()?$("#precioConImpuestos").val(t.toFixed(6)):$("#precioConImpuestos").val(t.toFixed(2))}function jsonimpuestosventa2(){var a=new Array,t=parseFloat($("#precioConImpuestos").val()),o=1;$(".impventa").each(function(){var t=new Array($(this).attr("data-id"),$(this).is(":checked").toString());if(a.push(t),$(this).is(":checked")){if(1==$(this).attr("data-id")){var i=parseFloat($(this).attr("data-value"));o+=i}if(2==$(this).attr("data-id")){i=parseFloat($(this).attr("data-value"));o+=i}if($(this).attr("data-id")>2){i=parseFloat($(this).attr("data-value"));o+=i}}}),t/=o,$("#jsonimpventa").val(JSON.stringify(a)),console.log(t),$("#precioSinImpuestos").val(t.toFixed(4)),1==$("#seisdec").val()&&$("#precioSinImpuestos").val(t.toFixed(6))}function mostrarconversion(){var a=$("#id").val();$("#frameconve").attr("src","../formulados/index.php?idFormulado="+a),$("#myModal").modal("show")}function VerProducto(a){$("#idselec").val(a),$("#filtro").attr("action","?modulo=productos&index=productos_config"),$("#filtro").submit()}function cargaconversion(){$("#myModalc").modal("show")}function VerificarProd(){""==$("#materiaProd").val()&&""==$("#finalProd").val()||0==$("#materiaProd").val()&&0==$("#finalProd").val()?($(".alert-danger").html("Por favor indique si el producto es materia prima o producto final."),$(".alert-danger").slideDown()):""==$("#formulado_tipo").val()?($(".alert-danger").html("Por favor seleccione una categoría para el producto."),$(".alert-danger").slideDown()):$("#formconfig").submit()}function cargaunidad(){var a=document.getElementById("unidadProd").value;document.getElementById("muestra_unidad").innerHTML=a}function VerFormulaciones(a){$("#myModal2").modal("show"),setTimeout(function(){$("#cargando,#cargando2").fadeOut()},1e3)}var materiaProd=$("#materiaProd").val(),finalProd=$("#finalProd").val(),ivaProd=$("#ivaProd").val();1==materiaProd?($('input[name="materiaProdch"]').bootstrapSwitch("state",!0),0!=$("#id").val()&&""!=$("#id").val()&&null!=$("#id").val()&&$("#btnconversion").fadeIn()):($('input[name="materiaProdch"]').bootstrapSwitch("state",!1),$("#impuestoscompra,#btnconversion").fadeOut()),1==finalProd?($('input[name="finalProdch"]').bootstrapSwitch("state",!0),$("#celdaprec").fadeIn()):($('input[name="finalProdch"]').bootstrapSwitch("state",!1),$("#impuestosventa").fadeOut()),0==$("#id").val()||""==$("#id").val()||$("#id").val(),1==ivaProd?$('input[name="ivaProdch"]').bootstrapSwitch("state",!0):$('input[name="ivaProdch"]').bootstrapSwitch("state",!1),$('input[name="materiaProdch"]').on("switchChange.bootstrapSwitch",function(a,t){1==t?($("#materiaProd").val(1),$("#impuestoscompra").fadeIn(),$("#id").val(),0!=$("#id").val()&&""!=$("#id").val()&&null!=$("#id").val()&&$("#btnconversion").fadeIn()):0==t&&($("#materiaProd").val(0),$("#impuestoscompra,#btnconversion,#conver").fadeOut())}),$('input[name="finalProdch"]').on("switchChange.bootstrapSwitch",function(a,t){1==t?($("#finalProd").val(1),$("#impuestosventa,#celdaprec").fadeIn()):0==t&&($("#finalProd").val(0),$("#impuestosventa,#celdaprec").fadeOut())}),$('input[name="ivaProdch"]').on("switchChange.bootstrapSwitch",function(a,t){1==t?$("#ivaProd").val(1):0==t&&$("#ivaProd").val(0)}),$(".impventa").on("switchChange.bootstrapSwitch",function(a,t){jsonimpuestosventa()}),$("#codigoProd").change(function(){AdvertirCodigo()}),$("#codigoProd,#precioSinImpuestos,#formulado_tipo").blur(function(){AdvertirCodigo()}),$("#precioSinImpuestos").change(function(){jsonimpuestosventa()}),$("#precioSinImpuestos").keyup(function(){jsonimpuestosventa()}),$("#precioConImpuestos").change(function(){jsonimpuestosventa2()}),$("#precioConImpuestos").keyup(function(){jsonimpuestosventa2()}),$(document).ready(function(){$("[name='materiaProdch']").bootstrapSwitch(),$("[name='finalProdch']").bootstrapSwitch(),$("[name='ivaProdch']").bootstrapSwitch(),$(".impventa").bootstrapSwitch(),jsonimpuestosventa(),$.ajax({url:"ajax/productos/formulados_tipo_name.php",data:{id:1},dataType:"json",success:function(a){var t=$(a).map(function(){return{value:this.formulado}}).get();$("#formulado_tipo").autocomplete({source:t,minLength:0,select:function(a,t){$("#formulado_tipo").val(t.item.id)}})}}),1==$("#finalProd").val()&&$("#btnformulaciones").css("display",""),CalcularICE()});